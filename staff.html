<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Our Team — O'Brien Immigration Law</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* ── Staff Page Hero ── */

    .staff-hero {
      padding: 80px 24px 60px;
      text-align: center;
      background: var(--white);
    }

    .staff-hero h1 {
      font-family: var(--heading-font);
      font-size: clamp(2.5rem, 6vw, 4rem);
      font-weight: 700;
      letter-spacing: -0.04em;
      line-height: 1.1;
      color: var(--dark);
      margin-bottom: 16px;
    }

    .staff-hero p {
      font-size: clamp(1rem, 2.5vw, 1.25rem);
      color: var(--mid-gray);
      max-width: 560px;
      margin: 0 auto;
      line-height: 1.6;
    }

    /* ── Location Segmented Control ── */

    .staff-location-switcher {
      display: flex;
      justify-content: center;
      padding: 0 24px 40px;
      background: var(--white);
    }

    .segmented-control {
      display: inline-flex;
      background: var(--off-white);
      border-radius: 12px;
      padding: 4px;
      gap: 2px;
      border: 1px solid var(--light-gray);
    }

    .segmented-control button {
      position: relative;
      padding: 10px 24px;
      font-size: 0.875rem;
      font-weight: 500;
      font-family: inherit;
      color: var(--mid-gray);
      background: transparent;
      border: none;
      border-radius: 9px;
      cursor: pointer;
      transition: color 0.3s cubic-bezier(0.15, 0.83, 0.66, 1),
                  background 0.3s cubic-bezier(0.15, 0.83, 0.66, 1),
                  box-shadow 0.3s cubic-bezier(0.15, 0.83, 0.66, 1);
      white-space: nowrap;
    }

    .segmented-control button:hover {
      color: var(--dark);
    }

    .segmented-control button.active {
      background: var(--white);
      color: var(--dark);
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08),
                  0 0 1px rgba(0, 0, 0, 0.06);
    }

    [data-theme="dark"] .segmented-control {
      background: rgba(40, 40, 40, 0.6);
      border-color: rgba(255, 255, 255, 0.08);
    }

    [data-theme="dark"] .segmented-control button.active {
      background: rgba(60, 60, 60, 0.8);
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
    }

    /* ── Staff Card Muting ── */

    .staff-grid-card {
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1),
                  box-shadow 0.35s cubic-bezier(0.25, 0.1, 0.25, 1),
                  filter 0.5s cubic-bezier(0.15, 0.83, 0.66, 1),
                  opacity 0.5s cubic-bezier(0.15, 0.83, 0.66, 1);
    }

    .staff-grid-card.muted {
      filter: grayscale(100%);
      opacity: 0.4;
    }

    .staff-grid-card.location-active {
      box-shadow: 0 0 0 1px rgba(100, 160, 255, 0.2),
                  0 0 24px rgba(100, 160, 255, 0.12),
                  0 4px 16px rgba(0, 0, 0, 0.04);
    }

    .staff-grid-card.location-active:hover {
      box-shadow: 0 0 0 1px rgba(100, 160, 255, 0.3),
                  0 0 32px rgba(100, 160, 255, 0.18),
                  0 8px 30px rgba(0, 0, 0, 0.08);
    }

    /* ── Staff Grid ── */

    .staff-grid {
      max-width: 1080px;
      margin: 0 auto;
      padding: 40px 24px 120px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 24px;
    }

    .staff-grid-card {
      background: var(--white);
      border: 1px solid var(--light-gray);
      border-radius: 20px;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1),
                  box-shadow 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
    }

    .staff-grid-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
    }

    .staff-grid-card:active {
      transform: scale(0.98);
    }

    .staff-grid-photo {
      width: 100%;
      aspect-ratio: 1 / 1;
      object-fit: cover;
      background: var(--off-white);
      display: block;
    }

    .staff-grid-avatar {
      width: 100%;
      aspect-ratio: 1 / 1;
      background: var(--off-white);
      color: var(--mid-gray);
      font-size: 3.5rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      letter-spacing: -0.02em;
    }

    .staff-grid-info {
      padding: 20px 24px 24px;
    }

    .staff-grid-name {
      font-family: var(--heading-font);
      font-size: 1.125rem;
      font-weight: 600;
      letter-spacing: -0.02em;
      color: var(--dark);
      margin-bottom: 4px;
    }

    .staff-grid-role {
      font-size: 0.875rem;
      color: var(--mid-gray);
      font-weight: 500;
    }

    /* ── Focus Modal ── */

    .staff-modal-overlay {
      position: fixed;
      inset: 0;
      z-index: 9000;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
      opacity: 0;
      pointer-events: none;
      background: rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(0px);
      -webkit-backdrop-filter: blur(0px);
      transition: opacity 0.4s cubic-bezier(0.15, 0.83, 0.66, 1),
                  backdrop-filter 0.6s cubic-bezier(0.15, 0.83, 0.66, 1) 0.15s,
                  -webkit-backdrop-filter 0.6s cubic-bezier(0.15, 0.83, 0.66, 1) 0.15s;
    }

    /* Aurora bloom: blue glow appears first, then blur follows */
    .staff-modal-overlay::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(
        circle at var(--bloom-x, 50%) var(--bloom-y, 50%),
        rgba(80, 140, 255, 0.25) 0%,
        rgba(100, 160, 255, 0.08) 40%,
        transparent 70%
      );
      opacity: 0;
      transform: scale(0.3);
      transition: opacity 0.3s cubic-bezier(0.15, 0.83, 0.66, 1),
                  transform 0.6s cubic-bezier(0.15, 0.83, 0.66, 1);
      pointer-events: none;
    }

    .staff-modal-overlay.visible::before {
      opacity: 1;
      transform: scale(2.5);
    }

    .staff-modal-overlay.visible {
      opacity: 1;
      pointer-events: auto;
      backdrop-filter: saturate(120%) blur(20px);
      -webkit-backdrop-filter: saturate(120%) blur(20px);
    }

    .staff-modal {
      background: rgba(255, 255, 255, 0.92);
      backdrop-filter: saturate(180%) blur(40px);
      -webkit-backdrop-filter: saturate(180%) blur(40px);
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 24px;
      max-width: 800px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      display: flex;
      gap: 40px;
      padding: 40px;
      position: relative;
      transform: scale(0.88);
      opacity: 0;
      transition: transform 0.5s cubic-bezier(0.15, 0.83, 0.66, 1) 0.1s,
                  opacity 0.4s cubic-bezier(0.15, 0.83, 0.66, 1) 0.1s;
      box-shadow: 0 24px 80px rgba(0, 0, 0, 0.12),
                  0 2px 8px rgba(0, 0, 0, 0.04);
      z-index: 1;
    }

    .staff-modal-overlay.visible .staff-modal {
      transform: scale(1);
      opacity: 1;
    }

    .staff-modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      min-width: 32px;
      height: 32px;
      padding: 0 10px;
      border: var(--btn-border, none);
      background: rgba(0, 0, 0, 0.06);
      border-radius: var(--btn-radius, 50%);
      backdrop-filter: var(--btn-backdrop, none);
      -webkit-backdrop-filter: var(--btn-backdrop, none);
      font-size: 1.125rem;
      color: var(--mid-gray);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s, color 0.2s, border-radius 0.2s;
      line-height: 1;
      z-index: 1;
    }

    .staff-modal-close:hover {
      background: rgba(0, 0, 0, 0.1);
      color: var(--dark);
    }

    .staff-modal-photo {
      width: 260px;
      height: 320px;
      border-radius: 16px;
      object-fit: cover;
      background: var(--off-white);
      flex-shrink: 0;
    }

    .staff-modal-avatar {
      width: 260px;
      height: 320px;
      border-radius: 16px;
      background: var(--off-white);
      color: var(--mid-gray);
      font-size: 5rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      letter-spacing: -0.02em;
    }

    .staff-modal-details {
      flex: 1;
      min-width: 0;
      display: flex;
      flex-direction: column;
    }

    .staff-modal-name {
      font-family: var(--heading-font);
      font-size: 1.75rem;
      font-weight: 700;
      letter-spacing: -0.03em;
      color: var(--dark);
      margin-bottom: 4px;
    }

    .staff-modal-role {
      font-size: 1.0625rem;
      color: var(--mid-gray);
      font-weight: 500;
      margin-bottom: 4px;
    }

    .staff-modal-office {
      font-size: 0.875rem;
      color: var(--mid-gray);
      margin-bottom: 20px;
    }

    .staff-modal-contact {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 20px;
    }

    .staff-modal-contact a {
      font-size: 0.875rem;
      color: var(--dark);
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: color 0.2s;
    }

    .staff-modal-contact a:hover {
      color: var(--accent-color, #0071e3);
    }

    .staff-modal-contact svg {
      flex-shrink: 0;
      color: var(--mid-gray);
    }

    .staff-modal-bio {
      font-size: 0.9375rem;
      line-height: 1.7;
      color: var(--dark);
    }

    /* ── Contact Form inside Modal ── */

    .staff-modal-form {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid rgba(0, 0, 0, 0.06);
    }

    .staff-modal-form h3 {
      font-family: var(--heading-font);
      font-size: 1rem;
      font-weight: 600;
      letter-spacing: -0.01em;
      color: var(--dark);
      margin-bottom: 12px;
    }

    .staff-modal-form .smf-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    .staff-modal-form .smf-group {
      margin-bottom: 10px;
    }

    .staff-modal-form label {
      display: block;
      font-size: 0.6875rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      color: var(--mid-gray);
      margin-bottom: 4px;
    }

    .staff-modal-form input,
    .staff-modal-form textarea {
      width: 100%;
      padding: 10px 12px;
      font-size: 0.875rem;
      font-family: inherit;
      border: 1px solid var(--light-gray);
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.7);
      color: var(--dark);
      outline: none;
      transition: border-color 0.2s;
    }

    .staff-modal-form input:focus,
    .staff-modal-form textarea:focus {
      border-color: var(--accent-color, #0071e3);
    }

    .staff-modal-form textarea {
      resize: vertical;
      min-height: 60px;
    }

    .staff-modal-form-btn {
      display: block;
      width: 100%;
      padding: 12px;
      margin-top: 4px;
      font-size: 0.875rem;
      font-weight: 500;
      font-family: inherit;
      color: var(--btn-color, #fff);
      background: var(--btn-bg, var(--dark));
      border: var(--btn-border, none);
      border-radius: var(--btn-radius, 980px);
      backdrop-filter: var(--btn-backdrop, none);
      -webkit-backdrop-filter: var(--btn-backdrop, none);
      cursor: pointer;
      transition: filter 0.2s, transform 0.15s cubic-bezier(0.22, 1, 0.36, 1);
    }

    .staff-modal-form-btn:hover {
      filter: brightness(0.9);
      transform: scale(0.98);
    }

    .staff-modal-form-btn:active {
      transform: scale(0.96);
    }

    .staff-modal-form .smf-success {
      text-align: center;
      padding: 16px 0;
      color: #2a7d2e;
      font-weight: 500;
      font-size: 0.9375rem;
    }

    /* ── Careers CTA Section ── */

    .careers-cta {
      text-align: center;
      padding: 80px 24px;
      background: var(--off-white);
    }

    .careers-cta h2 {
      font-family: var(--heading-font);
      font-size: clamp(1.5rem, 4vw, 2.25rem);
      font-weight: 700;
      letter-spacing: -0.03em;
      color: var(--dark);
      margin-bottom: 12px;
    }

    .careers-cta p {
      font-size: 1.0625rem;
      color: var(--mid-gray);
      max-width: 480px;
      margin: 0 auto 28px;
      line-height: 1.6;
    }

    .careers-cta-btn {
      display: inline-block;
      padding: 12px 28px;
      font-size: 0.9375rem;
      font-weight: 500;
      font-family: inherit;
      color: var(--btn-color, var(--white));
      background: var(--btn-bg, var(--dark));
      border: var(--btn-border, none);
      border-radius: var(--btn-radius, 980px);
      backdrop-filter: var(--btn-backdrop, none);
      -webkit-backdrop-filter: var(--btn-backdrop, none);
      text-decoration: none;
      cursor: pointer;
      transition: background 0.2s, transform 0.15s cubic-bezier(0.22, 1, 0.36, 1);
    }

    .careers-cta-btn:hover {
      background: #000;
      transform: scale(0.97);
    }

    .careers-cta-btn:active {
      transform: scale(0.94);
    }

    /* ── Empty State ── */

    .staff-empty {
      text-align: center;
      padding: 80px 24px;
      color: var(--mid-gray);
      font-size: 1.0625rem;
      grid-column: 1 / -1;
    }

    /* ── Responsive ── */

    @media (max-width: 900px) {
      .staff-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 600px) {
      .staff-grid {
        grid-template-columns: 1fr;
        max-width: 400px;
      }
      .staff-modal {
        flex-direction: column;
        padding: 28px;
        gap: 24px;
      }
      .staff-modal-photo,
      .staff-modal-avatar {
        width: 100%;
        height: 240px;
      }
    }
  </style>
</head>
<body>

  <nav class="navbar" id="globalNav">
    <!-- Rendered by renderGlobalNav() in main.js -->
  </nav>

  <main>
    <section class="staff-hero">
      <h1 class="reveal">Our Team</h1>
      <p class="reveal">Experienced attorneys and staff dedicated to protecting your immigration rights across Berkeley and Stockton.</p>
    </section>

    <div class="staff-location-switcher">
      <div class="segmented-control" id="locationSwitcher">
        <button class="active" data-location="all">All</button>
        <button data-location="San Francisco">San Francisco</button>
        <button data-location="Stockton">Stockton</button>
      </div>
    </div>

    <div class="staff-grid" id="staffGrid">
      <div class="staff-empty">Loading team members...</div>
    </div>

    <!-- Focus Modal -->
    <div class="staff-modal-overlay" id="staffModalOverlay">
      <div class="staff-modal" id="staffModal">
        <button class="staff-modal-close" aria-label="Close">&times;</button>
        <div id="staffModalPhoto"></div>
        <div class="staff-modal-details" id="staffModalDetails">
          <!-- Name / Title / Contact / Bio rendered by JS -->
          <!-- Contact Form rendered by JS below bio -->
        </div>
      </div>
    </div>

    <section class="careers-cta" id="careersCta" style="display:none">
      <h2>Interested in Joining Our Team?</h2>
      <p>We're always looking for passionate advocates to help families navigate the immigration system.</p>
      <a href="mailto:careers@obrienimmigration.com" class="careers-cta-btn">Get in Touch</a>
    </section>

    <footer class="footer">
      <div class="footer-links">
        <a href="index.html">Home</a>
        <a href="staff.html">Our Team</a>
      </div>
      <p>&copy; 2026 O'Brien Immigration Law. All rights reserved.</p>
    </footer>
  </main>

  <script src="main.js"></script>
  <script>
    (function() {
      /* ── Read staff from localStorage (seeded by main.js) ── */
      var staff = getStaff();

      /* ── Filter to visible members only ── */
      var visibleStaff = staff.filter(function(m) { return m.showOnWebsite !== false; });

      /* ── Render Grid ── */
      var container = document.getElementById("staffGrid");
      var careersCta = document.getElementById("careersCta");
      var hasHiring = false;

      if (visibleStaff.length === 0) {
        container.innerHTML = '<div class="staff-empty">No team members have been added yet.</div>';
        return;
      }

      container.innerHTML = visibleStaff.map(function(member, idx) {
        if (member.hiring) hasHiring = true;

        var photoHtml;
        if (member.imageUrl) {
          photoHtml = '<img class="staff-grid-photo" src="' + escapeHtmlUtil(member.imageUrl) + '" alt="' + escapeHtmlUtil(member.name) + '" onerror="this.style.display=\'none\';this.nextElementSibling.style.display=\'flex\'">' +
            '<div class="staff-grid-avatar" style="display:none">' + escapeHtmlUtil(member.name.charAt(0)) + '</div>';
        } else {
          photoHtml = '<div class="staff-grid-avatar">' + escapeHtmlUtil(member.name.charAt(0)) + '</div>';
        }

        return '<div class="staff-grid-card reveal" data-staff-idx="' + idx + '" data-office="' + escapeHtmlUtil(member.office || '') + '">' +
          photoHtml +
          '<div class="staff-grid-info">' +
            '<h2 class="staff-grid-name">' + escapeHtmlUtil(member.name) + '</h2>' +
            '<p class="staff-grid-role">' + escapeHtmlUtil(member.title) + '</p>' +
          '</div>' +
        '</div>';
      }).join('');

      if (hasHiring && careersCta) careersCta.style.display = '';

      /* ── Focus Modal ── */
      var overlay = document.getElementById("staffModalOverlay");
      var modal = document.getElementById("staffModal");
      var modalPhoto = document.getElementById("staffModalPhoto");
      var modalDetails = document.getElementById("staffModalDetails");

      function openStaffModal(member) {
        // Photo
        if (member.imageUrl) {
          modalPhoto.innerHTML = '<img class="staff-modal-photo" src="' + escapeHtmlUtil(member.imageUrl) + '" alt="' + escapeHtmlUtil(member.name) + '" onerror="this.style.display=\'none\';this.nextElementSibling.style.display=\'flex\'">' +
            '<div class="staff-modal-avatar" style="display:none">' + escapeHtmlUtil(member.name.charAt(0)) + '</div>';
        } else {
          modalPhoto.innerHTML = '<div class="staff-modal-avatar">' + escapeHtmlUtil(member.name.charAt(0)) + '</div>';
        }

        // Direct contact links
        var contactHtml = '';
        if (member.email || member.phone) {
          contactHtml = '<div class="staff-modal-contact">';
          if (member.email) {
            contactHtml += '<a href="mailto:' + escapeHtmlUtil(member.email) + '">' +
              '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M22 7l-10 7L2 7"/></svg>' +
              escapeHtmlUtil(member.email) + '</a>';
          }
          if (member.phone) {
            contactHtml += '<a href="tel:' + escapeHtmlUtil(member.phone) + '">' +
              '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg>' +
              escapeHtmlUtil(member.phone) + '</a>';
          }
          contactHtml += '</div>';
        }

        // Contact form (pre-filled with staff member name)
        var inquiryFor = 'Inquiry for ' + member.name;
        var formHtml =
          '<form class="staff-modal-form" id="staffContactForm" action="https://formspree.io/f/mpqjddon" method="POST">' +
            '<h3>Send a Message</h3>' +
            '<input type="hidden" name="_subject" value="' + escapeHtmlUtil(inquiryFor) + '">' +
            '<input type="hidden" name="inquiry" value="' + escapeHtmlUtil(inquiryFor) + '">' +
            '<input type="hidden" name="_next" value="' + window.location.origin + '/thank-you.html">' +
            '<div class="smf-row">' +
              '<div class="smf-group">' +
                '<label>Your Name</label>' +
                '<input type="text" name="name" required placeholder="Full name">' +
              '</div>' +
              '<div class="smf-group">' +
                '<label>Your Email</label>' +
                '<input type="email" name="email" required placeholder="you@example.com">' +
              '</div>' +
            '</div>' +
            '<div class="smf-group">' +
              '<label>Message</label>' +
              '<textarea name="message" placeholder="How can ' + escapeHtmlUtil(member.name.split(' ')[0]) + ' help you?"></textarea>' +
            '</div>' +
            '<button type="submit" class="staff-modal-form-btn">Send Message</button>' +
          '</form>';

        modalDetails.innerHTML =
          '<h2 class="staff-modal-name">' + escapeHtmlUtil(member.name) + '</h2>' +
          '<p class="staff-modal-role">' + escapeHtmlUtil(member.title) + '</p>' +
          '<p class="staff-modal-office">' + escapeHtmlUtil(member.office || '') + ' Office</p>' +
          contactHtml +
          formHtml +
          '<p class="staff-modal-bio" style="margin-top:20px;padding-top:20px;border-top:1px solid rgba(0,0,0,0.06)">' + escapeHtmlUtil(member.bio || '') + '</p>';

        requestAnimationFrame(function() {
          overlay.classList.add("visible");
        });
      }

      function closeStaffModal() {
        overlay.classList.remove("visible");
      }

      // Card clicks — capture position for Aurora bloom origin
      container.querySelectorAll(".staff-grid-card").forEach(function(card) {
        card.addEventListener("click", function(e) {
          // Set bloom origin to click position (% of viewport)
          var bx = ((e.clientX / window.innerWidth) * 100).toFixed(1) + "%";
          var by = ((e.clientY / window.innerHeight) * 100).toFixed(1) + "%";
          overlay.style.setProperty("--bloom-x", bx);
          overlay.style.setProperty("--bloom-y", by);

          var idx = parseInt(card.dataset.staffIdx, 10);
          if (visibleStaff[idx]) openStaffModal(visibleStaff[idx]);
        });
      });

      // Close on background click
      overlay.addEventListener("click", function(e) {
        if (e.target === overlay) closeStaffModal();
      });

      // Close button
      modal.querySelector(".staff-modal-close").addEventListener("click", closeStaffModal);

      // Escape key
      document.addEventListener("keydown", function(e) {
        if (e.key === "Escape" && overlay.classList.contains("visible")) {
          closeStaffModal();
        }
      });

      /* ── Location Switcher ── */
      var switcher = document.getElementById("locationSwitcher");
      var switcherBtns = switcher.querySelectorAll("button");

      switcherBtns.forEach(function(btn) {
        btn.addEventListener("click", function() {
          // Update active button
          switcherBtns.forEach(function(b) { b.classList.remove("active"); });
          btn.classList.add("active");

          var selectedLocation = btn.dataset.location;
          var cards = container.querySelectorAll(".staff-grid-card");

          cards.forEach(function(card) {
            var office = card.dataset.office;

            if (selectedLocation === "all") {
              card.classList.remove("muted", "location-active");
            } else if (office === selectedLocation) {
              card.classList.remove("muted");
              card.classList.add("location-active");
            } else {
              card.classList.add("muted");
              card.classList.remove("location-active");
            }
          });
        });
      });

      /* ── Reveal animations ── */
      container.querySelectorAll(".reveal").forEach(function(el) {
        var obs = new IntersectionObserver(function(entries) {
          entries.forEach(function(entry) {
            if (entry.isIntersecting) {
              entry.target.classList.add("visible");
              obs.unobserve(entry.target);
            }
          });
        }, { threshold: 0.15 });
        obs.observe(el);
      });
    })();
  </script>
</body>
</html>
